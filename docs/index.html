<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>CodeMapper - Interactive Go Code Visualizer</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta
      name="description"
      content="Analyze large Go codebases and visualize function dependencies with interactive graphs. Modern UI inspired by n8n.io."
    />
    <meta
      name="keywords"
      content="Go, Golang, code analysis, dependency visualization, interactive graphs, software architecture"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <button
      id="themeToggle"
      aria-label="Toggle dark mode"
      title="Toggle theme"
    ></button>

    <header class="hero">
      <h1>CodeMapper üó∫Ô∏è</h1>
      <p>Analyze large Go codebases and visualize function dependencies.</p>
    </header>

    <section class="carousel-wrapper">
      <div class="carousel" id="carousel">
        <div class="slides" id="slides">
          <!-- Slides injected by JS -->
        </div>
        <button class="nav prev" id="prevBtn" aria-label="Previous slide">
          ‚óÄ
        </button>
        <button class="nav next" id="nextBtn" aria-label="Next slide">‚ñ∂</button>
        <div class="dots" id="dots"></div>
      </div>
    </section>

    <main class="content">
      <section>
        <h2>Overview</h2>
        <p>
          CodeMapper is a tool designed to analyze large Go codebases and
          visualize function dependencies in an interactive graph. It helps you
          understand how functions and methods are connected across your
          project, making onboarding and refactoring easier.
        </p>
        <p>
          <strong>UI Inspiration:</strong> Inspired by n8n.io for intuitive
          graph exploration.
        </p>
      </section>

      <section>
        <h2>Problem Statement ‚ùì</h2>
        <p>
          Manually tracing dependencies across 40+ repositories is slow and
          error-prone. CodeMapper automates discovery and visualization of
          relationships.
        </p>
      </section>

      <section>
        <h2>Features ‚ú®</h2>
        <ul>
          <li>Automatic Go code analysis</li>
          <li>Dependency mapping between functions and methods</li>
          <li>Interactive visualization (drag nodes to rearrange)</li>
          <li>Simple CLI workflow</li>
          <li>Front tracking and backtracking of dependencies</li>
          <li>Export visualization as PNG</li>
        </ul>
      </section>

      <section>
        <h2>How It Works ‚öôÔ∏è</h2>
        <ol>
          <li>Scans your Go project for definitions and call sites.</li>
          <li>Generates a dependency map (JSON).</li>
          <li>Serves an interactive visualization.</li>
        </ol>
      </section>

      <section>
        <h2>Comparison with Other Go Code Visualizers üîç</h2>
        <p>
          CodeMapper stands out from other Go code visualization tools with its
          unique combination of features and modern UI design.
        </p>

        <table>
          <thead>
            <tr>
              <th>Tool</th>
              <th>Stars</th>
              <th>Visualization Type</th>
              <th>Key Features</th>
              <th>Interactivity</th>
              <th>Output Format</th>
              <th>Last Updated</th>
            </tr>
          </thead>
          <tbody>
            <tr class="highlight">
              <td><span class="tool-name">CodeMapper</span></td>
              <td><span class="star-rating">‚≠ê New</span></td>
              <td><strong>Dual Mode</strong>: Flow + Obsidian-style Graph</td>
              <td>
                Function-level analysis, dual visualization modes, real-time
                search, expandable neighbors, context menus
              </td>
              <td>
                <strong>High</strong> (drag, zoom, expand/collapse, search)
              </td>
              <td>Web-based (JSON data)</td>
              <td>Active</td>
            </tr>
            <tr>
              <td>
                <a
                  href="https://github.com/rodrigo-brito/gocity"
                  target="_blank"
                  >gocity</a
                >
              </td>
              <td><span class="star-rating">‚≠ê 1.8K</span></td>
              <td>3D City metaphor</td>
              <td>Code as buildings, 3D visualization, complexity metrics</td>
              <td>Medium (3D navigation)</td>
              <td>Web-based</td>
              <td>Dec 2023</td>
            </tr>
            <tr>
              <td>
                <a href="https://github.com/kisielk/godepgraph" target="_blank"
                  >godepgraph</a
                >
              </td>
              <td><span class="star-rating">‚≠ê 1.2K</span></td>
              <td>Static dependency graph</td>
              <td>Package-level dependencies, Graphviz output</td>
              <td>Low (static images)</td>
              <td>DOT/PNG/SVG</td>
              <td>Jun 2024</td>
            </tr>
            <tr>
              <td>
                <a href="https://github.com/KyleBanks/depth" target="_blank"
                  >depth</a
                >
              </td>
              <td><span class="star-rating">‚≠ê 1K</span></td>
              <td>Tree visualization</td>
              <td>Dependency tree, CLI output, import analysis</td>
              <td>Low (CLI tree)</td>
              <td>Terminal/JSON</td>
              <td>Feb 2022</td>
            </tr>
            <tr>
              <td>
                <a href="https://github.com/hirokidaichi/goviz" target="_blank"
                  >goviz</a
                >
              </td>
              <td><span class="star-rating">‚≠ê 708</span></td>
              <td>Graph visualization</td>
              <td>Package dependencies, Graphviz integration</td>
              <td>Low (static graphs)</td>
              <td>DOT format</td>
              <td>Feb 2017</td>
            </tr>
            <tr>
              <td>
                <a
                  href="https://github.com/bayraktugrul/modview"
                  target="_blank"
                  >modview</a
                >
              </td>
              <td><span class="star-rating">‚≠ê 217</span></td>
              <td>Module graph</td>
              <td>Go module visualization, external dependencies</td>
              <td>Medium (web interface)</td>
              <td>Web-based</td>
              <td>Dec 2024</td>
            </tr>
          </tbody>
        </table>

        <h3>Why Choose CodeMapper? ‚ú®</h3>
        <ul>
          <li>
            <strong>üéØ Function-Level Analysis</strong>: Unlike most tools that
            only show package-level dependencies, CodeMapper analyzes individual
            functions and methods
          </li>
          <li>
            <strong>üîÑ Dual Visualization Modes</strong>: Choose between
            traditional flow diagrams and modern Obsidian-style graphs
          </li>
          <li>
            <strong>üéÆ High Interactivity</strong>: Real-time search, expandable
            neighbors, context menus, and smooth interactions
          </li>
          <li>
            <strong>üìä Rich Details</strong>: Function signatures, file
            locations, line numbers, and comprehensive metadata
          </li>
          <li>
            <strong>üöÄ Modern UI</strong>: Inspired by n8n.io with beautiful,
            responsive design
          </li>
          <li>
            <strong>üîç Advanced Features</strong>: Path highlighting,
            backtracking, keyboard shortcuts, and export capabilities
          </li>
        </ul>
      </section>

      <section>
        <h2>Quick Start üö¶</h2>
        <pre><code>go run main.go -path "./proj" -gopath "/user/go/pkg/mod" \
-analyze-deps "example.org/dep1,example.org/dep2" \
-out "full-codemap.json" -serve ":8080"
# Open http://localhost:8080
</code></pre>
      </section>

      <section>
        <h2>Command Line Arguments</h2>
        <ul>
          <li>-path: project directory</li>
          <li>-gopath: Go module cache directory</li>
          <li>-analyze-deps: comma-separated dependencies</li>
          <li>-out: output JSON filename</li>
          <li>-serve: start server address</li>
        </ul>
      </section>

      <section>
        <h2>License üìÑ</h2>
        <p>MIT</p>
      </section>
    </main>

    <footer class="footer">
      <p>
        Made with ‚ù§Ô∏è in India ‚Ä¢
        <a
          href="https://github.com/chinmay-sawant/CodeMapper"
          target="_blank"
          rel="noopener"
          >GitHub</a
        >
      </p>
    </footer>

    <script>
      // Inline JS to avoid CORS restrictions when opened via file://
      (function () {
        const RAW_BASE =
          "https://raw.githubusercontent.com/chinmay-sawant/CodeMapper/master/screenshot";
        const images = [1, 2, 3, 4, 5].map((i) => `${RAW_BASE}/image${i}.png`);

        const slidesEl = document.getElementById("slides");
        const dotsEl = document.getElementById("dots");
        const prevBtn = document.getElementById("prevBtn");
        const nextBtn = document.getElementById("nextBtn");
        const toggleBtn = document.getElementById("themeToggle");

        let index = 0;
        let timer = null;
        const INTERVAL = 5000;

        function buildSlides() {
          slidesEl.innerHTML = images
            .map(
              (src) =>
                '<div class="slide"><img loading="lazy" src="' +
                src +
                '" alt="CodeMapper screenshot"></div>'
            )
            .join("");
          dotsEl.innerHTML = images
            .map(
              (_, i) =>
                '<button aria-label="Go to slide ' + (i + 1) + '"></button>'
            )
            .join("");
        }

        function setActive(i) {
          index = (i + images.length) % images.length;
          slidesEl.style.transform = "translateX(-" + index * 100 + "%)";
          Array.from(dotsEl.children).forEach((d, di) =>
            d.classList.toggle("active", di === index)
          );
          resetTimer();
        }

        function next() {
          setActive(index + 1);
        }
        function prev() {
          setActive(index - 1);
        }

        function resetTimer() {
          if (timer) clearInterval(timer);
          timer = setInterval(next, INTERVAL);
        }

        nextBtn.addEventListener("click", next);
        prevBtn.addEventListener("click", prev);
        dotsEl.addEventListener("click", (e) => {
          if (e.target.tagName === "BUTTON") {
            const i = Array.from(dotsEl.children).indexOf(e.target);
            setActive(i);
          }
        });

        function applyTheme(t) {
          if (t === "light") {
            document.body.classList.add("light");
            toggleBtn.textContent = "üåô";
          } else {
            document.body.classList.remove("light");
            toggleBtn.textContent = "‚òÄÔ∏è";
          }
        }

        const saved = localStorage.getItem("codemapper-theme") || "dark";
        applyTheme(saved);
        toggleBtn.addEventListener("click", () => {
          const nextTheme = document.body.classList.contains("light")
            ? "dark"
            : "light";
          localStorage.setItem("codemapper-theme", nextTheme);
          applyTheme(nextTheme);
        });

        buildSlides();
        setActive(0);
        resetTimer();

        document.addEventListener("visibilitychange", () => {
          if (document.hidden) {
            clearInterval(timer);
          } else {
            resetTimer();
          }
        });
      })();
    </script>
  </body>
</html>
